<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>詩經·蒹葭 互動測驗 - 100題</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: "Microsoft YaHei", "SimSun", serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .back-btn {
            position: absolute;
            top: 15px;
            left: 15px;
            background: rgba(255,255,255,0.2);
            color: white;
            border: 2px solid white;
            padding: 8px 20px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 0.9em;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
        }

        .back-btn:hover {
            background: white;
            color: #1e3c72;
            transform: translateX(-3px);
        }

        .header {
            position: relative;
        }

        .poem-text {
            background: rgba(255,255,255,0.1);
            padding: 20px;
            margin: 20px 0;
            border-radius: 10px;
            line-height: 2;
            font-size: 1.1em;
        }

        .progress-bar {
            background: #e0e0e0;
            height: 8px;
            margin: 20px 30px;
            border-radius: 4px;
            overflow: hidden;
        }

        .progress-fill {
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            height: 100%;
            width: 0%;
            transition: width 0.3s ease;
        }

        .question-container {
            padding: 30px;
            display: none;
        }

        .question-container.active {
            display: block;
        }

        .question-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #667eea;
        }

        .question-number {
            font-size: 1.2em;
            color: #667eea;
            font-weight: bold;
        }

        .question-text {
            font-size: 1.3em;
            margin-bottom: 25px;
            line-height: 1.8;
            color: #333;
        }

        .options {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .option {
            background: #f5f5f5;
            padding: 15px 20px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .option:hover {
            background: #e8e8e8;
            transform: translateX(5px);
        }

        .option.selected {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }

        .option.correct {
            background: #4caf50;
            color: white;
            border-color: #4caf50;
        }

        .option.incorrect {
            background: #f44336;
            color: white;
            border-color: #f44336;
        }

        .navigation {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
            gap: 15px;
        }

        .btn {
            padding: 12px 30px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1em;
            transition: all 0.3s ease;
            font-weight: bold;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            flex: 1;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .btn-secondary {
            background: #e0e0e0;
            color: #333;
        }

        .btn-secondary:hover {
            background: #d0d0d0;
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .result-container {
            display: none;
            padding: 30px;
            text-align: center;
        }

        .result-container.active {
            display: block;
        }

        .score-display {
            font-size: 4em;
            color: #667eea;
            margin: 30px 0;
            font-weight: bold;
        }

        .score-message {
            font-size: 1.5em;
            margin-bottom: 30px;
            color: #333;
        }

        .result-details {
            background: #f5f5f5;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            text-align: left;
        }

        .result-details h3 {
            color: #667eea;
            margin-bottom: 15px;
        }

        .detail-item {
            padding: 10px;
            margin: 5px 0;
            background: white;
            border-radius: 5px;
            display: flex;
            justify-content: space-between;
        }

        .start-screen {
            padding: 50px 30px;
            text-align: center;
        }

        .start-screen h2 {
            color: #667eea;
            font-size: 2em;
            margin-bottom: 30px;
        }

        .start-screen p {
            font-size: 1.2em;
            line-height: 2;
            margin-bottom: 40px;
            color: #555;
        }

        .start-screen .btn-primary {
            padding: 15px 50px;
            font-size: 1.2em;
        }

        .feedback {
            margin-top: 15px;
            padding: 15px;
            border-radius: 8px;
            display: none;
        }

        .feedback.show {
            display: block;
        }

        .feedback.correct {
            background: #e8f5e9;
            color: #2e7d32;
            border: 2px solid #4caf50;
        }

        .feedback.incorrect {
            background: #ffebee;
            color: #c62828;
            border: 2px solid #f44336;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header" id="header">
            <a href="index.html" class="back-btn">← 返回主頁</a>
            <h1>詩經·蒹葭</h1>
            <div class="poem-text" id="poemText">
                蒹葭蒼蒼，白露為霜。所謂伊人，在水一方。<br>
                溯洄從之，道阻且長。溯游從之，宛在水中央。<br><br>

                蒹葭萋萋，白露未晞。所謂伊人，在水之湄。<br>
                溯洄從之，道阻且躋。溯游從之，宛在水中坻。<br><br>

                蒹葭采采，白露未已。所謂伊人，在水之涘。<br>
                溯洄從之，道阻且右。溯游從之，宛在水中沚。
            </div>
        </div>

        <div class="progress-bar" id="progressBar" style="display: none;">
            <div class="progress-fill" id="progressFill"></div>
        </div>

        <div class="start-screen" id="startScreen">
            <h2>歡迎參加《蒹葭》知識測驗</h2>
            <p>
                本測驗共100題，涵蓋詩歌內容、字詞理解、文學賞析、<br>
                修辭手法、文化背景等多個方面。<br><br>
                點擊開始按鈕開始測驗，祝你好運！
            </p>
            <button class="btn btn-primary" onclick="startTest()">開始測驗</button>
        </div>

        <div class="question-container" id="questionContainer"></div>

        <div class="result-container" id="resultContainer">
            <h2>測驗完成！</h2>
            <div class="score-display" id="scoreDisplay"></div>
            <div class="score-message" id="scoreMessage"></div>
            <div class="result-details" id="resultDetails"></div>
            <button class="btn btn-primary" onclick="restartTest()">重新測驗</button>
        </div>
    </div>

    <script>
        const questions = [
            // 第1-10題：基本字詞理解
            {
                question: "「蒹葭」指的是什麼？",
                options: ["荷花", "蘆葦", "菊花", "梅花"],
                correct: 1
            },
            {
                question: "「蒼蒼」在詩中形容什麼顏色？",
                options: ["青綠茂盛的樣子", "枯黃的樣子", "雪白的樣子", "暗黑的樣子"],
                correct: 0
            },
            {
                question: "「白露為霜」描述的是什麼季節？",
                options: ["春天", "夏天", "秋天", "冬天"],
                correct: 2
            },
            {
                question: "「伊人」在詩中指的是什麼？",
                options: ["詩人自己", "心中思念的人", "路人", "家人"],
                correct: 1
            },
            {
                question: "「在水一方」的意思是？",
                options: ["在水裡", "在水的另一邊", "在水上", "在水底"],
                correct: 1
            },
            {
                question: "「溯洄」是指？",
                options: ["順流而下", "逆流而上", "橫渡河流", "停在原地"],
                correct: 1
            },
            {
                question: "「道阻且長」中的「阻」是什麼意思？",
                options: ["順暢", "艱難、阻隔", "短暫", "平坦"],
                correct: 1
            },
            {
                question: "「溯游」是指？",
                options: ["逆流而上", "順流而下", "游泳", "划船"],
                correct: 1
            },
            {
                question: "「宛在水中央」的「宛」是什麼意思？",
                options: ["真的", "好像、彷彿", "一定", "絕對"],
                correct: 1
            },
            {
                question: "第二章中「萋萋」形容蒹葭的什麼狀態？",
                options: ["稀疏", "茂盛", "枯萎", "矮小"],
                correct: 1
            },

            // 第11-20題：詩句內容
            {
                question: "「白露未晞」的「晞」是什麼意思？",
                options: ["結霜", "乾", "濕潤", "消失"],
                correct: 1
            },
            {
                question: "「在水之湄」的「湄」指的是？",
                options: ["水中央", "水邊", "水底", "水面"],
                correct: 1
            },
            {
                question: "「道阻且躋」的「躋」是什麼意思？",
                options: ["平坦", "陡峭、難行", "寬闊", "狹窄"],
                correct: 1
            },
            {
                question: "「宛在水中坻」的「坻」指的是？",
                options: ["水底", "水中的小沙洲", "水邊", "水面"],
                correct: 1
            },
            {
                question: "第三章「蒹葭采采」的「采采」是什麼意思？",
                options: ["枯黃", "稀少", "繁盛茂密", "凋零"],
                correct: 2
            },
            {
                question: "「白露未已」的「已」是什麼意思？",
                options: ["開始", "停止", "繼續", "增加"],
                correct: 1
            },
            {
                question: "「在水之涘」的「涘」是指？",
                options: ["水中央", "水邊", "水面", "水源"],
                correct: 1
            },
            {
                question: "「道阻且右」的「右」在此處是什麼意思？",
                options: ["右邊", "曲折", "左邊", "直行"],
                correct: 1
            },
            {
                question: "「宛在水中沚」的「沚」指的是？",
                options: ["水中小洲", "水邊", "水底", "水源"],
                correct: 0
            },
            {
                question: "詩中「所謂伊人」一共出現了幾次？",
                options: ["一次", "兩次", "三次", "四次"],
                correct: 2
            },

            // 第21-30題：結構與形式
            {
                question: "《蒹葭》全詩共有幾章？",
                options: ["兩章", "三章", "四章", "五章"],
                correct: 1
            },
            {
                question: "每一章有多少句？",
                options: ["六句", "八句", "十句", "十二句"],
                correct: 1
            },
            {
                question: "這首詩的結構特點是什麼？",
                options: ["遞進式", "重章疊句", "對比式", "因果式"],
                correct: 1
            },
            {
                question: "三章中描寫蒹葭的詞語依次是？",
                options: ["蒼蒼、采采、萋萋", "蒼蒼、萋萋、采采", "萋萋、蒼蒼、采采", "采采、萋萋、蒼蒼"],
                correct: 1
            },
            {
                question: "三章中「伊人」的位置變化是？",
                options: ["水邊→水中央→水源", "一方→湄→涘", "水底→水中→水面", "近處→遠處→更遠處"],
                correct: 1
            },
            {
                question: "三章中道路的困難程度是？",
                options: ["越來越容易", "越來越困難", "保持不變", "時難時易"],
                correct: 1
            },
            {
                question: "詩中每章第幾句是「所謂伊人」？",
                options: ["第二句", "第三句", "第四句", "第五句"],
                correct: 1
            },
            {
                question: "每一章的韻腳主要押什麼韻？",
                options: ["ang韻", "ing韻", "ong韻", "eng韻"],
                correct: 0
            },
            {
                question: "「溯洄從之」和「溯游從之」構成什麼關係？",
                options: ["遞進", "對偶", "轉折", "因果"],
                correct: 1
            },
            {
                question: "三章之間主要通過改變什麼詞語來重複？",
                options: ["只改變動詞", "只改變名詞", "改變少數關鍵詞", "完全不同"],
                correct: 2
            },

            // 第31-40題：修辭手法
            {
                question: "「蒹葭蒼蒼，白露為霜」運用了什麼修辭手法？",
                options: ["比喻", "擬人", "對偶", "興"],
                correct: 3
            },
            {
                question: "「在水一方」、「在水之湄」、「在水之涘」的反覆運用體現了什麼手法？",
                options: ["比喻", "重章疊句", "誇張", "反問"],
                correct: 1
            },
            {
                question: "「道阻且長」、「道阻且躋」、「道阻且右」運用了什麼修辭？",
                options: ["排比", "對偶", "頂真", "疊詞"],
                correct: 0
            },
            {
                question: "「宛在水中央」的「宛」字使用了什麼修辭效果？",
                options: ["誇張", "虛實結合", "對比", "反問"],
                correct: 1
            },
            {
                question: "全詩以景起興，屬於《詩經》的哪種表現手法？",
                options: ["賦", "比", "興", "頌"],
                correct: 2
            },
            {
                question: "「蒼蒼」、「萋萋」、「采采」屬於什麼修辭？",
                options: ["疊字", "對偶", "比喻", "排比"],
                correct: 0
            },
            {
                question: "詩中追尋「伊人」的過程採用了什麼描寫手法？",
                options: ["正面描寫", "側面描寫", "虛實結合", "對比描寫"],
                correct: 2
            },
            {
                question: "「溯洄」與「溯游」兩種追尋方式構成？",
                options: ["遞進", "對比", "因果", "假設"],
                correct: 1
            },
            {
                question: "「道阻且長」中「且」字的作用是？",
                options: ["轉折", "遞進", "並列", "假設"],
                correct: 1
            },
            {
                question: "全詩通過景物變化來表達情感的手法是？",
                options: ["直抒胸臆", "借景抒情", "托物言志", "以物喻人"],
                correct: 1
            },

            // 第41-50題：主題與情感
            {
                question: "這首詩的主題是？",
                options: ["描寫秋天景色", "表達追求不得的惆悵", "讚美大自然", "批評社會"],
                correct: 1
            },
            {
                question: "詩人對「伊人」的情感是？",
                options: ["憎恨", "思念與追求", "輕視", "同情"],
                correct: 1
            },
            {
                question: "「道阻且長」表達了什麼情感？",
                options: ["輕鬆愉快", "追求過程的艱難", "無所謂", "憤怒"],
                correct: 1
            },
            {
                question: "「宛在水中央」給人什麼感覺？",
                options: ["觸手可及", "可望而不可即", "已經得到", "毫不在意"],
                correct: 1
            },
            {
                question: "全詩的情感基調是？",
                options: ["歡快", "哀傷惆悵", "憤怒", "平靜"],
                correct: 1
            },
            {
                question: "詩中的「伊人」象徵著什麼？",
                options: ["具體的某個人", "理想的追求目標", "過去的回憶", "未來的希望"],
                correct: 1
            },
            {
                question: "「白露為霜」營造了什麼氛圍？",
                options: ["溫暖", "淒清寂寥", "熱鬧", "恐怖"],
                correct: 1
            },
            {
                question: "反覆追尋而不得體現了什麼？",
                options: ["輕易放棄", "執著追求", "漫不經心", "三心二意"],
                correct: 1
            },
            {
                question: "詩中「水」的意象代表什麼？",
                options: ["生命之源", "阻隔與距離", "清涼舒適", "危險"],
                correct: 1
            },
            {
                question: "這首詩表達的人生哲理是？",
                options: ["及時行樂", "美好事物往往難以企及", "知足常樂", "堅持就是勝利"],
                correct: 1
            },

            // 第51-60題：文學賞析
            {
                question: "「蒹葭蒼蒼」為何放在開篇？",
                options: ["隨意安排", "營造意境，引出主題", "湊字數", "展示文采"],
                correct: 1
            },
            {
                question: "三章景物描寫逐漸變化的作用是？",
                options: ["增加趣味", "表現時間推移和情感深化", "重複累贅", "無特別作用"],
                correct: 1
            },
            {
                question: "「在水一方」的距離感營造了什麼效果？",
                options: ["親近感", "隔閡與遙不可及感", "恐懼感", "厭惡感"],
                correct: 1
            },
            {
                question: "重章疊句的藝術效果是？",
                options: ["單調乏味", "增強音韻美和情感反覆", "湊字數", "沒有作用"],
                correct: 1
            },
            {
                question: "詩中沒有直接寫「伊人」的樣貌，這種手法叫？",
                options: ["詳寫", "留白", "誇張", "對比"],
                correct: 1
            },
            {
                question: "「溯洄」、「溯游」兩種方式都不能接近伊人，說明什麼？",
                options: ["詩人懶惰", "追求之難，無論如何都難以實現", "水太深", "路不熟"],
                correct: 1
            },
            {
                question: "全詩的意境可以概括為？",
                options: ["明朗歡快", "朦朧淒美", "激昂慷慨", "恐怖陰森"],
                correct: 1
            },
            {
                question: "這首詩的語言風格是？",
                options: ["華麗雕琢", "質朴自然", "艱澀難懂", "粗俗直白"],
                correct: 1
            },
            {
                question: "詩中的「水」意象反覆出現，具有什麼作用？",
                options: ["描寫風景", "強化阻隔主題", "湊字數", "無意義"],
                correct: 1
            },
            {
                question: "《蒹葭》在藝術上最突出的特點是？",
                options: ["直接抒情", "含蓄蘊藉，意境深遠", "敘事詳盡", "議論充分"],
                correct: 1
            },

            // 第61-70題：文化背景
            {
                question: "《蒹葭》出自《詩經》的哪一部分？",
                options: ["風", "雅", "頌", "賦"],
                correct: 0
            },
            {
                question: "更具體地說，《蒹葭》出自？",
                options: ["周南", "召南", "秦風", "鄭風"],
                correct: 2
            },
            {
                question: "《詩經》是中國第一部什麼？",
                options: ["散文集", "詩歌總集", "小說集", "戲劇集"],
                correct: 1
            },
            {
                question: "《詩經》的主要表現手法「賦、比、興」中，本詩主要用了？",
                options: ["賦", "比", "興", "三者都用"],
                correct: 2
            },
            {
                question: "《詩經》的時代大致是？",
                options: ["商代", "西周至春秋", "戰國", "秦漢"],
                correct: 1
            },
            {
                question: "「白露」是二十四節氣中的哪個季節？",
                options: ["春季", "夏季", "秋季", "冬季"],
                correct: 2
            },
            {
                question: "《詩經》中的「風」主要是指？",
                options: ["宮廷樂歌", "民間歌謠", "祭祀樂歌", "史詩"],
                correct: 1
            },
            {
                question: "《詩經》共收錄多少篇詩？",
                options: ["205篇", "305篇", "405篇", "505篇"],
                correct: 1
            },
            {
                question: "《詩經》又稱為？",
                options: ["詩三百", "楚辭", "漢賦", "唐詩"],
                correct: 0
            },
            {
                question: "《詩經》的編訂傳統上認為與誰有關？",
                options: ["老子", "孔子", "墨子", "莊子"],
                correct: 1
            },

            // 第71-80題：字詞深度理解
            {
                question: "「蒹」單獨指什麼？",
                options: ["蘆葦的花", "沒長穗的蘆葦", "蘆葦的根", "蘆葦的葉"],
                correct: 1
            },
            {
                question: "「葭」單獨指什麼？",
                options: ["蘆葦的花", "初生的蘆葦", "長穗的蘆葦", "蘆葦的根"],
                correct: 2
            },
            {
                question: "「為霜」的「為」讀音應該是？",
                options: ["wéi", "wèi", "兩者都可", "wú"],
                correct: 0
            },
            {
                question: "「從之」的「之」指代什麼？",
                options: ["道路", "伊人", "水", "蒹葭"],
                correct: 1
            },
            {
                question: "「湄」、「涘」、「一方」在方位上的區別體現了？",
                options: ["沒有區別", "位置的變化和距離感", "高度的變化", "方向的變化"],
                correct: 1
            },
            {
                question: "「坻」、「沚」都是指水中陸地，它們的區別在於？",
                options: ["完全相同", "大小不同", "沒有區別，押韻需要", "形狀不同"],
                correct: 2
            },
            {
                question: "「躋」的本義是？",
                options: ["下降", "登高", "平行", "停止"],
                correct: 1
            },
            {
                question: "「右」在古代也通假為哪個字？",
                options: ["左", "佑", "迂", "友"],
                correct: 2
            },
            {
                question: "「晞」的意思接近於？",
                options: ["濕潤", "乾燥", "凝結", "滴落"],
                correct: 1
            },
            {
                question: "「已」在「白露未已」中是什麼詞性？",
                options: ["名詞", "動詞", "形容詞", "副詞"],
                correct: 1
            },

            // 第81-90題：比較與拓展
            {
                question: "《蒹葭》的情感與以下哪首詩最接近？",
                options: ["《關雎》", "《氓》", "《靜女》", "《木瓜》"],
                correct: 0
            },
            {
                question: "「所謂伊人，在水一方」後來常被用來比喻？",
                options: ["親密無間", "可望而不可即的理想", "近在咫尺", "已經失去"],
                correct: 1
            },
            {
                question: "這首詩對後世文學的影響主要在於？",
                options: ["敘事技巧", "意境營造與朦朧美", "議論方式", "人物塑造"],
                correct: 1
            },
            {
                question: "《蒹葭》與《關雎》的共同點是？",
                options: ["都寫征戰", "都寫追求與思念", "都寫農耕", "都寫祭祀"],
                correct: 1
            },
            {
                question: "後世哪種文學形式繼承了《蒹葭》的朦朧美？",
                options: ["唐代邊塞詩", "宋代婉約詞", "元代雜劇", "明清小說"],
                correct: 1
            },
            {
                question: "「在水一方」這個意象在現代流行文化中有何影響？",
                options: ["沒有影響", "被用於歌曲、影視作品中", "只用於學術研究", "已被遺忘"],
                correct: 1
            },
            {
                question: "《蒹葭》的解讀歷來有不同觀點，主要分歧在於？",
                options: ["文字真偽", "「伊人」的具體所指", "作者是誰", "創作年代"],
                correct: 1
            },
            {
                question: "有學者認為「伊人」是指賢才，這種解讀屬於？",
                options: ["文學解讀", "政治寓意解讀", "宗教解讀", "科學解讀"],
                correct: 1
            },
            {
                question: "《蒹葭》最打動人心的是？",
                options: ["華麗辭藻", "追求不得的哀婉情懷", "激昂情緒", "複雜情節"],
                correct: 1
            },
            {
                question: "這首詩在《詩經》中的地位如何？",
                options: ["默默無聞", "最著名的篇章之一", "爭議很大", "已被淘汰"],
                correct: 1
            },

            // 第91-100題：綜合與深度
            {
                question: "《蒹葭》全詩未出現哪個字？",
                options: ["人", "水", "火", "道"],
                correct: 2
            },
            {
                question: "全詩的時間跨度暗示為？",
                options: ["一天", "從清晨到傍晚", "一個季節", "一年"],
                correct: 1
            },
            {
                question: "詩人追尋「伊人」的結果是？",
                options: ["成功找到", "最終放棄", "始終未能接近", "半途而廢"],
                correct: 2
            },
            {
                question: "「白露為霜」到「白露未已」的變化說明？",
                options: ["氣溫升高", "時間推移，露水狀態變化", "季節更替", "天氣變好"],
                correct: 1
            },
            {
                question: "三章中道路描寫「長」→「躋」→「右」體現了？",
                options: ["道路變好", "追尋更加困難曲折", "距離變近", "完全相同"],
                correct: 1
            },
            {
                question: "「伊人」位置「一方」→「湄」→「涘」的變化說明？",
                options: ["越來越近", "不斷變換方位，依然難以接近", "越來越遠", "位置固定"],
                correct: 1
            },
            {
                question: "詩中哪兩種追尋方式都失敗了？",
                options: ["走路和游泳", "逆流和順流", "白天和晚上", "陸路和水路"],
                correct: 1
            },
            {
                question: "這首詩的永恆魅力在於？",
                options: ["具體的人物故事", "普遍的追求與失落體驗", "歷史事件記錄", "道德說教"],
                correct: 1
            },
            {
                question: "《蒹葭》在表達方式上最大的特點是？",
                options: ["直白明了", "含蓄蘊藉，留有想像空間", "慷慨激昂", "詳盡敘述"],
                correct: 1
            },
            {
                question: "如果用一個詞概括《蒹葭》，最恰當的是？",
                options: ["歡樂", "惆悵", "憤怒", "平淡"],
                correct: 1
            }
        ];

        let currentQuestion = 0;
        let userAnswers = [];
        let score = 0;

        function startTest() {
            document.getElementById('startScreen').style.display = 'none';
            document.getElementById('poemText').style.display = 'none';
            document.getElementById('progressBar').style.display = 'block';
            showQuestion(0);
        }

        function showQuestion(index) {
            const container = document.getElementById('questionContainer');
            const question = questions[index];

            container.className = 'question-container active';
            container.innerHTML = `
                <div class="question-header">
                    <span class="question-number">第 ${index + 1} 題 / 共 100 題</span>
                    <span>已完成: ${userAnswers.length}/100</span>
                </div>
                <div class="question-text">${question.question}</div>
                <div class="options">
                    ${question.options.map((option, i) => `
                        <div class="option" onclick="selectOption(${i})" data-index="${i}">
                            ${String.fromCharCode(65 + i)}. ${option}
                        </div>
                    `).join('')}
                </div>
                <div class="feedback" id="feedback"></div>
                <div class="navigation">
                    <button class="btn btn-secondary" onclick="previousQuestion()" ${index === 0 ? 'disabled' : ''}>
                        上一題
                    </button>
                    <button class="btn btn-primary" id="nextBtn" onclick="nextQuestion()" disabled>
                        ${index === questions.length - 1 ? '完成測驗' : '下一題'}
                    </button>
                </div>
            `;

            // 如果已經回答過，顯示之前的選擇
            if (userAnswers[index] !== undefined) {
                const options = container.querySelectorAll('.option');
                options[userAnswers[index]].classList.add('selected');
                document.getElementById('nextBtn').disabled = false;
            }

            updateProgress();
        }

        function selectOption(optionIndex) {
            const options = document.querySelectorAll('.option');
            const feedback = document.getElementById('feedback');
            const question = questions[currentQuestion];

            // 移除之前的選擇
            options.forEach(opt => {
                opt.classList.remove('selected', 'correct', 'incorrect');
            });

            // 標記當前選擇
            options[optionIndex].classList.add('selected');
            userAnswers[currentQuestion] = optionIndex;

            // 顯示反饋
            if (optionIndex === question.correct) {
                feedback.className = 'feedback show correct';
                feedback.textContent = '✓ 回答正確！';
                options[optionIndex].classList.add('correct');
            } else {
                feedback.className = 'feedback show incorrect';
                feedback.textContent = `✗ 回答錯誤。正確答案是：${String.fromCharCode(65 + question.correct)}. ${question.options[question.correct]}`;
                options[optionIndex].classList.add('incorrect');
                options[question.correct].classList.add('correct');
            }

            // 啟用下一題按鈕
            document.getElementById('nextBtn').disabled = false;
        }

        function nextQuestion() {
            if (userAnswers[currentQuestion] === undefined) {
                alert('請選擇一個答案');
                return;
            }

            if (currentQuestion < questions.length - 1) {
                currentQuestion++;
                showQuestion(currentQuestion);
            } else {
                showResults();
            }
        }

        function previousQuestion() {
            if (currentQuestion > 0) {
                currentQuestion--;
                showQuestion(currentQuestion);
            }
        }

        function updateProgress() {
            const progress = ((currentQuestion + 1) / questions.length) * 100;
            document.getElementById('progressFill').style.width = progress + '%';
        }

        function showResults() {
            // 計算分數
            score = 0;
            for (let i = 0; i < questions.length; i++) {
                if (userAnswers[i] === questions[i].correct) {
                    score++;
                }
            }

            const percentage = (score / questions.length * 100).toFixed(1);

            // 根據分數給出評價
            let message = '';
            if (percentage >= 90) {
                message = '優秀！您對《蒹葭》的理解非常深入！';
            } else if (percentage >= 80) {
                message = '良好！您對《蒹葭》有很好的理解！';
            } else if (percentage >= 70) {
                message = '不錯！繼續加油！';
            } else if (percentage >= 60) {
                message = '及格了！還有提升空間！';
            } else {
                message = '需要加強對《蒹葭》的學習哦！';
            }

            document.getElementById('questionContainer').classList.remove('active');
            const resultContainer = document.getElementById('resultContainer');
            resultContainer.classList.add('active');

            document.getElementById('scoreDisplay').textContent = `${score}/100`;
            document.getElementById('scoreMessage').textContent = message;

            // 顯示詳細結果
            const details = document.getElementById('resultDetails');
            details.innerHTML = `
                <h3>測驗統計</h3>
                <div class="detail-item">
                    <span>正確率：</span>
                    <span><strong>${percentage}%</strong></span>
                </div>
                <div class="detail-item">
                    <span>答對題數：</span>
                    <span><strong>${score} 題</strong></span>
                </div>
                <div class="detail-item">
                    <span>答錯題數：</span>
                    <span><strong>${questions.length - score} 題</strong></span>
                </div>
            `;

            updateProgress();
        }

        function restartTest() {
            currentQuestion = 0;
            userAnswers = [];
            score = 0;
            document.getElementById('resultContainer').classList.remove('active');
            document.getElementById('startScreen').style.display = 'block';
            document.getElementById('poemText').style.display = 'block';
            document.getElementById('progressBar').style.display = 'none';
            document.getElementById('progressFill').style.width = '0%';
        }
    </script>
</body>
</html>